<!DOCTYPE html>
<html lang="ko-kr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://joungsik.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://joungsik.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://joungsik.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://joungsik.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://joungsik.github.io/css/light.css' />
    <link rel="stylesheet" href='https://joungsik.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://joungsik.github.io/css/syntax.css' />
    <title>토비의 스프링 - 4장 - JoungSik</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">
    <meta name="naver-site-verification" content="897620aba8ba7aa292baac576c13b337c3c0b021" />

    
    <meta name="description"
  content="토비의 스프링 - 4장" />
<meta name="keywords"
  content='spring' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://joungsik.github.io/post/2021_12_30/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="토비의 스프링 - 4장 - JoungSik" />
<meta name="twitter:description"
  content="토비의 스프링 - 4장" />
<meta name="twitter:site" content="https://joungsik.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://joungsik.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="토비의 스프링 - 4장 - JoungSik">
<meta property="og:description"
  content="토비의 스프링 - 4장" />
<meta property="og:url" content="https://joungsik.github.io/post/2021_12_30/" />
<meta property="og:site_name" content="토비의 스프링 - 4장" />
<meta property="og:image"
  content="https://joungsik.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-12-30 01:03:16 &#43;0900 KST" />











<script async src="https://www.googletagmanager.com/gtag/js?id=G-DL4SWDGV72"></script>
<script>
  if (navigator.doNotTrack !== '1') {
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-DL4SWDGV72');
  }
</script>



</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://joungsik.github.io/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://joungsik.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://joungsik.github.io/">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://joungsik.github.io/">
                  <img class=" avatar-user"
                    src="https://avatars.githubusercontent.com/u/6128807?v=4"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://joungsik.github.io/">JoungSik</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://joungsik.github.io/post/2021_12_30/">토비의 스프링 - 4장</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Thu, 30 Dec 2021 01:03:16 &#43;0900"
                    class="no-wrap">
                    Thu, 30 Dec 2021 01:03:16 &#43;0900</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Thu, 30 Dec 2021 01:04:11 &#43;0900"
                    class="no-wrap">
                    Thu, 30 Dec 2021 01:04:11 &#43;0900</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      1828 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/spring">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      spring
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="토비의-스프링---4장">토비의 스프링 - 4장</h1>
<p>이번 장에서는 예외에 대해 알아보도록 하겠습니다.</p>
<p>먼저 에러와 예외의 차이를 알아야 합니다.</p>
<p>에러는 자바 실행 시 비정상적인 상황이 발생 했을 때 사용하게 되는 것으로 어플리케이션 단계에서는 대응 할 수 있는 방법이 없습니다. 하지만 시스템 레벨에서 특별한 작업을 하고 있다면 대응 할 수 있지만 그렇지 않을 경우에는 처리 할 수 있는 방법이 없기 때문에 비정상종료를 막을 수 없습니다.</p>
<p>하지만 예외의 경우에는 개발자들이 만든 어플리케이션 코드의 작업 중에 예외 상황이 발생 했을 떄 동작에 대한 처리를 해주는게 가능하고 비정상종료를 막고 실행 상태를 유지해 주는 것을 말합니다.</p>
<p>이러한 에러와 예외는 적절히 비정상종료를 막고 실행 상태를 유지해주거나 작업이 종료 되었다면 운영자 혹은 개발자에게 분명하게 통보 되어야 한다는 중요한 점을 명심해야 합니다.</p>
<hr>
<p>에러를 처리하는 방법으로 저는 <a href="https://sentry.io/welcome/">sentry</a> 라는 에러 모니터링 서비스를 사용하고 있습니다.</p>
<p>다음으로 예외를 처리 하는 방법을 알아보려고 합니다.</p>
<p>예외에는 크게 체크 예외와 언체크 예외로 나뉘게 됩니다. 이는 Java 코드 상으로 Exception 클래스의 서브 클래스이면서 RuntimeException 클래스를 상속한 것을 언체크 예외, RuntimeException 을 상속하지 않는 것을 체크 예외라고 합니다.</p>
<p>좀 더 큰 차이로는 RuntimeException 을 상속한 언체크 예외는 명시적으로 예외처리를 하지 않아도 됩니다. 반대로 체크 예외는 반드시 예외를 처리 해줘야만 합니다. 그렇지 않으면 컴파일 에어를 발생시킵니다. 또한 RuntimeException 은 피할 수 있지만 개발자의 부주의에 의해 발생할 수 있는 경우에 발생하도록 만들어져 있습니다. 즉, 예상 할 수 없는 예외 상황이 아니기 때문에 명시적으로 예외 처리를 할 필요가 없게 됩니다.</p>
<p>이런 명시적인 예외 처리를 해줄 때는 크게 3가지 방법이 있습니다.</p>
<ol>
<li>
<p>예외 복구</p>
</li>
<li>
<p>예외처리 회피</p>
</li>
<li>
<p>예외 전환</p>
</li>
</ol>
<p>예외 복구는 말 그대로 예외 상황을 파악하고 문제를 해결해 정상 상태로 돌리는 것을 말합니다. 정상 상태로 되돌리는 것은 예시가 필요한데 책에 나오는 대표적인 예시는 네트워크 환경이 안좋아졌을 때 반복 시도를 하는 것을 들 수 있습니다. 원래라면 환경 문제로 연결이 끊겨야 하지만 반복적으로 네트워크 연결을 시도 함으로 복구를 시도하는 것입니다.</p>
<p>예외처리 회피는 예외처리를 자신이 담당하지 않고 자신을 호출한 쪽으로 던지는 것을 말합니다, 결국 호출한 쪽에서 이러한 예외 복구 과정을 진행해야 하지만 이렇게 예외처리 회피를 사용하는 이유는 해당 메서드의 역할과 책임이 아닐 경우에 사용하게 됩니다. 이를 사용할 때도 이전의 SOLID 의 단일 책임 원칙을 생각해서 사용해야 합니다.</p>
<p>마지막으로 예외 전환은 예외처리 회피와 같지만 던지는 예외를 호출한쪽에서 확인 할 수 있는 적절한 형태의 예외로 전환해서 던진다는 점이 다릅니다.</p>
<hr>
<p>최근엔 예전과는 다르게 언체크 예외가 보편화 되고 있는데 그 이유는 catch, throws 의 코드를 꼭 작성해야하는 체크 예외는 어쩔 수 없는 에러 상황을 복구 시킬 방법이 없을 때는 에러를 복구 시키기 보단 운영자나 개발자에게 에러 상황을 빠르게 알리고 이를 언체크 에러로 변환하는게 더 유효하기 때문입니다. 또 언체크 에러라도 catch 로 잡아서 복구 할 수 있기 때문에 꼭 체크 예외로 할 필요가 없기도 하며 무분별한 catch 와 throws 는 코드의 관리에도 문제를 발생 시킬 수 있습니다.</p>
<p>이런 장점이 있는 언체크 예외, 런타임 에러는 사용에 주의를 기울일 필요가 있습니다. 컴파일러가 예외처리를 강제하지 않기 때문에 신경 쓰지 않으면 예외상황을 충분히 고려하지 않을 수 있습니다.</p>
<p>이런 예외 상황들은 시스템 또는 외부의 예외 상황인데 어플리케이션 자체의 로직에 의해 의도적으로 발생 시키고 catch 를 통해 어떤 조치를 취하도록 하는 예외를 어플리케이션 예외라고 합니다.</p>
<p>어플리케이션 예외는 별도의 리턴 값을 통해 예외를 처리하는 방법과 비지니스적인 의미를 담은 예외를 체크 예외로 만들어 던지는 방법으로 구현 됩니다.</p>
<p>별도의 리턴 값을 통한 예외 처리는 개발자들간의 의사소통과 값을 확인 할 때 체크 로직의 중복 코드가 많이 발생 할 수 있는 문제가 있습니다. 반대로 비지니스적인 의미를 담은 체크 예외로 만들면 체크 예외의 장점을 살려 컴파일 단계에서 이를 확인 할 수 있습니다.</p>
<hr>
<p>마지막으로 스프링에서 사용되는 예외 처리 중 DataAccessException 에 대해서 살펴보려고 합니다. DataAccessException 은 SQLException 을 포장해 런타임 에러로 변경해 SQLException 에 담긴 다루기 힘든 상세한 에러 정보를 일관성 있는 예외로 전환해 추상화 해주려는 용도로 쓰입니다.</p>
<p>스프링에서는 다양한 DB 를 지원하는데 이때 DB는 SQL 만 다른 것이 아니라 예외의 종류와 원인도 제각각이고 DB 에러 코드 또한 제각각인 상황에서 동일한 상황에서 일관된 예외를 전달 받는다면 효과적인 대응이 가능합니다. 이를 스프링에서는 DB별 에러 코드를 분류해 스프링이 정의한 예외 클래스와 매핑해놓은 에러 코드 테이블을 만들어서 사용합니다.</p>
<p>또한 DataAccessException 은 SQLException 만이 아닌 ORM 기술처럼 JDBC 와는 다른 방식의 DB 엑세스 기술에서도 사용 할 수 있도록 기술에 독립적인 추상화된 예외를 제공하기도 합니다.</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://joungsik.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://joungsik.github.io/css/toc.css' />


  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://joungsik.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://joungsik.github.io/js/github-style.js"></script>



</html>